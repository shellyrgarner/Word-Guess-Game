<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Word Guess Game</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/reset.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body>
    <header>
        <h1>Word Guess Game</h1>
        <h5>Theme: Words Related To Music</h5>
    </header>

    <div class="container">

        <div class="row mt-5">
            <div class="col-xs-12 col-sm-12 col-md-6">
                <div class="bio text-secondary">
                    <img class="img-fluid rounded" src="assets/images/music_flash.gif" alt="music" style="width:300px;height:300px;">
                </div>
            </div>
            <div class="col-xs-12 col-sm-12 col-md-6 mt-5">
                <div class="game-area" "bio text-secondary d-inline-block">
                    <div id="game">Press Any Key To Get Started!</div>
                    <div id="word"></div>
                    <div id="right"></div>
                    <div id="wrong"></div>
                    <div id="gl"></div>
                    <div id="wins"></div>
                    <div id="loss"></div>
                </div>
            </div>
        </div>
    </div>

    <script>

        var wordsToChooseFrom = ["songs", "skip", "aux", "record", "disc", "radio", "prince", "cd", "concert", "encore", "play", "beat", "dj", "guitar", "drums", "piano", "sax", "sing", "rap"];
        var letters = [];
        var lettersLeft = 0;
        var rightLetters = [];
        var wrongLetters = [];
        var chosenWordBlanks = [];
        var chosenWord;
        var guessesRemaining = 6;
        var lossCounter = 0;
        var winsCounter = 0;
        var guessesCorrect = 0;

        function startGame() {

            //document.querySelector("#game").innerHTML = "Guess the word!";

            chosenWord = wordsToChooseFrom[Math.floor(Math.random() * wordsToChooseFrom.length)];
            letters = chosenWord.split('');
            lettersLeft = letters.length;

            wrongLetters = [];
            chosenWordBlanks = [];
            guessesRemaining = 6;
            guessesCorrect = 0;

            console.log(chosenWord);
            console.log(letters);
            console.log(lettersLeft);

            for (var i = 0; i < lettersLeft; i++) {

                //chosenWordBlanks[i] = "_ ";
                chosenWordBlanks.push('_');
                //document.getElementById('word').innerHTML = chosenWordBlanks[i].repeat(lettersLeft.length);  
                document.getElementById('word').innerHTML = chosenWordBlanks;

            }
            document.getElementById('word').innerHTML = chosenWordBlanks.join(' ');
            document.getElementById('gl').innerHTML = "Guesses Remaining: " + guessesRemaining;
            document.getElementById('wrong').innerHTML = wrongLetters;
            console.log(chosenWordBlanks);
        }

        function letter(userInput) {
            if (chosenWord.indexOf(userInput) > -1) {
                for (var i = 0; i < lettersLeft; i++) {
                    if (letters[i] === userInput) {
                        guessesCorrect++;
                        chosenWordBlanks[i] = userInput;
                        //rightLetters[i] = userInput;
                        document.getElementById('word').innerHTML = chosenWordBlanks.join(' ');

                    }
                } console.log(rightLetters);
                console.log(lettersLeft);
                console.log(guessesCorrect);
            }
            else {
                guessesRemaining--;
                wrongLetters.push(userInput);
                document.getElementById('wrong').innerHTML = wrongLetters;
                document.getElementById('gl').innerHTML = "Guesses Remaining: " + guessesRemaining;
                //alert("try again");
                console.log('Wrong Letters = ' + wrongLetters);
                console.log('Guesses Remaining = ' + guessesRemaining);
                console.log(lettersLeft);
            }
        }
        function winOrNah() {
            if (guessesCorrect === lettersLeft) {
                winsCounter++;
                console.log(chosenWordBlanks);
                document.getElementById('wins').innerHTML = "Your wins: " + winsCounter;
                alert("Winner, Winner!");
                startOver();
            }
            else if (guessesRemaining === 0) {
                lossCounter++;
                document.getElementById('loss').innerHTML = "Your losses: " + lossCounter;
                alert("Better luck next time!");
                startOver();
            }
        }
        function startOver() {

            chosenWord = wordsToChooseFrom[Math.floor(Math.random() * wordsToChooseFrom.length)];
            letters = chosenWord.split('');
            lettersLeft = letters.length;

            wrongLetters = [];
            chosenWordBlanks = [];
            guessesRemaining = 6;
            guessesCorrect = 0;
            //userInput = 0;

            startGame();
        }

        startGame();

        document.onkeyup = function (event) {

            var keyCode = event.keyCode;
            var userInput = String.fromCharCode(event.keyCode).toLowerCase();

            letter(userInput);
            winOrNah();
        }


    </script>

</body>

</html>